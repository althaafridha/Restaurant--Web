<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <link
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="https://printjs-4de6.kxcdn.com/print.min.css">
    <title>Canteen IDN</title>
    <style>
      li {
        list-style: none;
        margin: 20px 0 20px 0;
      }

      a {
        text-decoration: none;
      }

      .sidebar {
        width: 250px;
        height: 100vh;
        position: fixed;
        margin-left: -300px;
        transition: 0.4s;
      }

      .active-main-content {
        margin-left: 250px;
      }

      .active-sidebar {
        margin-left: 0;
      }

      #main-content {
        transition: 0.4s;
      }

      #preloader {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #fff;
        z-index: 99999;
      }

      .bg-custom {
        background-color: #43a047;
      }

      .text-custom {
        color: #43a047;
      }

      #status {
        width: 500px;
        height: 500px;
        position: absolute;
        left: 40%;
        top: 20%;
        z-index: 9999;
        background-image: url("loding.gif");
        background-position: center;
        background-size: 100%;
        margin: -50px 0 0 -50px;
      }

      .img-responsive {
        width: auto;
        height: 200px;
      }
    </style>
  </head>

  <body>
    <div id="preloader">
      <div id="status"></div>
    </div>
    <nav class="navbar navbar-expand-lg navbar-light bg-custom">
      <div class="container-fluid">
        <a class="navbar-brand" href="#"></a>
        <button class="btn btn-light btn-sm" id="button-toggle">
          <i class="bx bxs-chevrons-right" id="icon"></i>
        </button>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <div class="form-check form-switch">
                <input
                  class="form-check-input"
                  style="height: 30px; width: 50px"
                  type="checkbox"
                  id="switch"
                  checked
                />
                <label
                  class="form-check-label ml-2 text-light"
                  for="flexSwitchCheckChecked"
                  ><i class="bx bxs-moon bx-sm text-light" id="labelmode"></i
                ></label>
              </div>
            </li>
          </ul>
          <form class="d-lg-flex mr-auto mr-lg-5">
            <div class="mr-4 pt-2 text-light">
              <i class='bx bx-cart' role="button" data-bs-toggle="modal" data-bs-target="#cartModal"></i>
            </div>
            &emsp;&emsp;
            <button class="btn btn-light text-custom" id="logout" type="button">
              Logout
            </button>
          </form>
        </div>
      </div>
    </nav>
    <div class="modal fade" id="cartModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="exampleModalLabel">Your Cart</h1>
          </div>
          <div class="modal-body" id="printArea">
            <div class="table-responsive">
              <table class="table" id="cartTable">
                <thead>
                  <tr>
                    <th>Nomor</th>
                    <th>Nama Appetizer</th>
                    <th>Jumlah</th>
                  </tr>
                </thead>
              </table>
            </div>
            <div class="row g-3 align-items-center">
                <div class="col-auto">
                  <label for="total" class="col-form-label">Total :</label>
                </div>
                <div class="col-auto">
                  <input type="number" id="total" class="form-control">
                </div>
              </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary" id="checkOut" onclick="printJS('printArea', 'html')">Checkout</button>
          </div>
        </div>
      </div>
    </div>
    <div class="sidebar shadow p-4 bg-light" id="sidebar">
      <img
        src="IDN-.png"
        alt="logoidn"
        width="120"
        height="100"
        class="d-block mx-auto align-text-top"
      />
      <ul>
        <li>
          <a href="appetizer.html" class="text-custom">
            <i class="icon bx bx-baguette bx-sm"></i> Appetizer
          </a>
        </li>
        <li>
          <a href="maincourse.html" class="text-custom">
            <i class="bx bx-bowl-rice bx-sm"></i> Main Course
          </a>
        </li>
        <li>
          <a href="#" class="text-custom">
            <i class="bx bxs-wine"></i> Dessert
          </a>
        </li>
        <li>
          <a href="#" class="text-custom">
            <i class="bx bx-popsicle"></i> Snack
          </a>
        </li>
        <li>
          <a href="cabang.html" class="text-custom">
            <i class="bx bx-home"></i> Cabang
          </a>
        </li>
        <li>
          <a href="owner.html" class="text-custom">
            <i class="bx bx-child"></i> Owner
          </a>
        </li>
        <li>
          <a href="sugestion.html" class="text-custom">
            <i class="bx bx-child"></i> Suggestion
          </a>
        </li>
      </ul>
    </div>
    <div class="p-4" id="main-content">
      <div class="container-fluid">
        <h1 class="h1 text-center textcustom" style="font-family: Brush Script mt">
          appetizer
        </h1>
        <div class="row d-flex justify-content-start" id="data_api"></div>
      </div>
    </div>

    <footer class="footer py-3 bg-custom">
      <div class="container text-center">
        <span class="text-light">Copyright Â© Muhammad Althaaf Ridha </span>
      </div>
    </footer>

    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://unpkg.com/boxicons@2.1.4/dist/boxicons.js"></script>
    <script
      src="https://code.jquery.com/jquery-3.6.1.min.js "
      integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ="
      crossorigin=" anonymous "
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@9"></script>
    <script src="https://printjs-4de6.kxcdn.com/print.min.js"></script>
    <script>
      $(document).ready(function () {
        $("#status").fadeOut(10000);
        $("#preloader").delay(1000).fadeOut(1000);
        $("body").delay(500).css({
          overflow: "visible",
        });
      });

      var html = "";
      var mealApi = "https://www.themealdb.com/api/json/v1/1/categories.php";

      fetch(mealApi)
        .then((res) => res.json())
        .then((data) => {
          for (i = 1; i < mealApi.length; i++) {
            var desc = data.categories[i].strCategoryDescription;
              if (desc.length > 20) {
                desc = desc.substring(0,50);
              }
            html +=
              '<div class="col-md-3 p-4">'+
                '<div class="card shadow" style="width: 18rem;">' +
                  '<img src="'+ data.categories[i].strCategoryThumb +'" class="card-img-top" alt="...">' +
                  '<div class="card-body">' +
                    '<h5 class="card-title">'+ data.categories[i].strCategory +'</h5>' +
                    '<p class="card-text">'+ desc +'</p>' +
                    '<div class="row">'+
                      '<div class="col-md-6">'+
                       ' <i class="bx bx-cart-add bx-sm carts" data-apper="'+ data.categories[i].strCategory +'" role="button"></i>'+
                        '</div>'+
                      '<div class="col-md-6 d-flex justify-content-end">'+
                        '<a href="#" class="btn btn-primary modals" data-image="'+data.categories[i].strCategoryThumb +'" data-title="'+data.categories[i].strCategory +'" data-text="'+data.categories[i].strCategoryDescription +'"  data-bs-toggle="modal" data-bs-target="#appetizer">Detail</a>' +
                        '</div>'+
                    '</div>'+
                  '</div>' +
                '</div>' +
              '</div>' +
              '<div class="modal fade" id="appetizer" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">'+                
                '<div class="modal-dialog modal-dialog-centered">' +
                  '<div class="modal-content">'+
                    '<div class="modal-header">'+
                      '<h1 class="modal-title fs-5 h1" id="exampleModalLabel"></h1>'+
                    '</div>'+
                    '<div class="modal-body">'+
                        '<img class="d-block mx-auto imgModal">'+
                        '<p class="text">'+
                    '</div>'+
                    '<div class="modal-footer">'+
                      '<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>'+
                    '</div>'+
                  '</div>'+
                '</div>'+
             ' </div>';
              $('#data_api').html(html);

              $('.carts').click(function(){
                $('#cartModal').modal('show');
                var totalNumber = 1;
                // ini nilainya
                var n = $(this).attr('data-apper');
                // ini tabel nya
                var tabel = document.getElementById('cartTable');
                // ini rownya
                var row = tabel.insertRow(1);
                // ini columnya
                var kolom1 = row.insertCell(0);
                var kolom2 = row.insertCell(1);
                var kolom3 = row.insertCell(2);
                // lempar data dalam bentuk HTML
                kolom1.innerHTML = '<div class="totalNumber"></div>';
                kolom2.innerHTML = n;
                kolom3.innerHTML = '<input type="number" class="form-control jumlah" placeholder="masukkan jumlah"/>';

                $('#cartTable .totalNumber').each(function(){
                  var jumlahNumber = $(this).text(parseInt(totalNumber++));
                });

                // untuk fungsi mengetik
                $('.jumlah').keyup(function(){
                  $('#cartTable').on('input', '.jumlah' ,function(){
                    // ini untuk nilai patokan pertama
                    var totalNumber = 0;
                    $('#cartTable .jumlah').each(function(){
                      var jumlah = $(this).val();
                      totalNumber += parseFloat(jumlah);
                    })
                    $('#total').val(totalNumber);
                  });
                });


                // $('#cartTable').on('click', '.totalNumber', function(){
                //   totalNumber++;
                //   $(this).html(totalNumber);
                // });

            //     Swal.fire({
            //     icon: 'success',
            //     title: 'Berhasil masuk ke cart',
            //   })
              })

              $('.modals').click(function(){
                $('.imgModal').attr('src',$(this).attr('data-image'));
                $('.h1').html($(this).attr('data-title'));
                $('.text').html($(this).attr('data-text'));
              })

          }
        });

      // untuk memasukan dan mengeluarkan sidebar
      document.getElementById("button-toggle").addEventListener("click", () => {
        document.getElementById("sidebar").classList.toggle("active-sidebar");
        document
          .getElementById("main-content")
          .classList.toggle("active-main-content");
      });

      $("#button-toggle").click(function () {
        $("#icon").toggleClass("bx  bxs-chevrons-right bx bxs-chevrons-left");
      });

      $("#switch").click(function () {
        $("#labelmode").toggleClass("bxs-moon bx-moon");
        $("body, .card").toggleClass("bg-dark");
        $("#textmode, .card").toggleClass("text-light");
      });

      $('#logout').click(function() {
            Swal.fire({
              icon: 'question',
              title: 'apakah kamu ingin logout ?',
              showCancelButton: true,
              confirmButtonText: 'ok',
            }).then((result) => {
              if (result.isConfirmed) {
                window.location = "index.html";
              } else if (result.isDenied) {
                Swal.fire('Changes are not saved', '', 'info')
              }
            })
          });

    </script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
    -->
  </body>
</html>